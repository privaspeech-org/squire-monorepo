apiVersion: v1
kind: ConfigMap
metadata:
  name: steward-config
  namespace: squire
  labels:
    app.kubernetes.io/name: squire-steward
    app.kubernetes.io/component: config
data:
  steward.yaml: |
    # Steward Configuration
    # Customize this file for your environment

    # Goals - What the steward should work toward
    goals:
      - text: "Keep CI green and fix failing builds"
      # - path: "/config/goals.md"  # Can also load from file

    # Signals - Where to collect work items from
    signals:
      github:
        # Repositories to monitor (multi-repo support)
        repos:
          - "your-org/main-repo"
          # - "your-org/frontend"
          # - "your-org/api"
        # What to watch for
        watch:
          - "failed_ci"
          - "open_prs"
          # - "issues"
          # - "greptile_reviews"
      # files:
      #   - "./signals/manual-tasks.md"

    # Execution configuration
    execution:
      backend: "squire"
      squire:
        # Default repo for tasks without explicit repo
        default_repo: "your-org/main-repo"
        # Optional: Additional repos (can also use signals.github.repos)
        # repos:
        #   - "your-org/frontend"
        #   - "your-org/api"
        model: "opencode/glm-4.7-free"
        max_concurrent: 5
        # Optional: Limit concurrent tasks per repo
        # max_per_repo: 2

    # LLM configuration for task generation
    llm:
      model: "anthropic:claude-sonnet-4-20250514"

    # Auto-merge configuration (optional)
    # auto_merge:
    #   enabled: false
    #   min_confidence: 5

    # Schedule configuration
    schedule:
      interval: "30m"
      quiet_hours: "22:00-08:00"
      timezone: "UTC"
